<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_111) on Tue Dec 18 04:04:20 MST 2018 -->
<title>EdgeQueryInternal</title>
<meta name="date" content="2018-12-18">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="EdgeQueryInternal";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../gov/usgs/cwbquery/EdgeQuery.html" title="class in gov.usgs.cwbquery"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../gov/usgs/cwbquery/EdgeQueryServer.html" title="class in gov.usgs.cwbquery"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?gov/usgs/cwbquery/EdgeQueryInternal.html" target="_top">Frames</a></li>
<li><a href="EdgeQueryInternal.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">gov.usgs.cwbquery</div>
<h2 title="Class EdgeQueryInternal" class="title">Class EdgeQueryInternal</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>gov.usgs.cwbquery.EdgeQueryInternal</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">EdgeQueryInternal</span>
extends java.lang.Object</pre>
<div class="block">This does a query using the usual query methods, but does not use the TCP/IP interface to get the
 data. Hence, it must be used by a thread of the QueryMom process that is running a QueryServer
 thread. This is used by the RAM based QuerySpanCollection and MiniSeedCollection and its related
 classes to get data from the disk storage. It might be useful to other tasks needing to do
 queries and are part of the QueryMom process.
 <p>
 This saves some overhead where we really just want to get raw blocks back. It uses a MiniSeedPool
 in the EdgeQuery class to pool the returned blocks so the user has to be conscious of the need to
 free the blocks when done with them via the freeBlocks() method.
 <p>
 It has additional routines to sort and eliminate duplicate blocks, and to free the blocks in the
 MiniSeedPool.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../gov/usgs/cwbquery/EdgeQueryInternal.html#EdgeQueryInternal-java.lang.String-boolean-boolean-gov.usgs.anss.edgethread.EdgeThread-">EdgeQueryInternal</a></span>(java.lang.String&nbsp;tg,
                 boolean&nbsp;readonly,
                 boolean&nbsp;nonice,
                 <a href="../../../gov/usgs/anss/edgethread/EdgeThread.html" title="class in gov.usgs.anss.edgethread">EdgeThread</a>&nbsp;parent)</code>
<div class="block">Create a EdgeQueryInternal to access the stored data from a CWB from within the QueryMom
 environment.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../gov/usgs/cwbquery/EdgeQueryInternal.html#cleanupBlocks-java.util.ArrayList-">cleanupBlocks</a></span>(java.util.ArrayList&lt;<a href="../../../gov/usgs/anss/seed/MiniSeed.html" title="class in gov.usgs.anss.seed">MiniSeed</a>&gt;&nbsp;blks)</code>
<div class="block">This routines will sort the ArrayList of MiniSEED returned by query(), and eliminate any
 duplicates (including freeing them from the MiniSeedPool.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../gov/usgs/cwbquery/EdgeQueryInternal.html#freeBlocks-java.util.ArrayList-">freeBlocks</a></span>(java.util.ArrayList&lt;<a href="../../../gov/usgs/anss/seed/MiniSeed.html" title="class in gov.usgs.anss.seed">MiniSeed</a>&gt;&nbsp;blks)</code>
<div class="block">This frees all of the blocks on a return ArrayList from a call to query.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../gov/usgs/cwbquery/EdgeQueryInternal.html#getLastNDups--">getLastNDups</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../gov/usgs/cwbquery/EdgeQueryInternal.html#query-java.lang.String-long-double-java.util.ArrayList-">query</a></span>(java.lang.String&nbsp;seedname,
     long&nbsp;begin,
     double&nbsp;duration,
     java.util.ArrayList&lt;<a href="../../../gov/usgs/anss/seed/MiniSeed.html" title="class in gov.usgs.anss.seed">MiniSeed</a>&gt;&nbsp;blks)</code>
<div class="block">This is the main routine for a EdgeQueryInternal - it returns miniseed blocks from a query but
 without using the TCP/IP server interface.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../gov/usgs/cwbquery/EdgeQueryInternal.html#setDebug-boolean-">setDebug</a></span>(boolean&nbsp;t)</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../gov/usgs/cwbquery/EdgeQueryInternal.html#setQueryDebug-boolean-">setQueryDebug</a></span>(boolean&nbsp;t)</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../gov/usgs/cwbquery/EdgeQueryInternal.html#toString--">toString</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>java.lang.StringBuilder</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../gov/usgs/cwbquery/EdgeQueryInternal.html#toStringBuilder-java.lang.StringBuilder-">toStringBuilder</a></span>(java.lang.StringBuilder&nbsp;tmp)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="EdgeQueryInternal-java.lang.String-boolean-boolean-gov.usgs.anss.edgethread.EdgeThread-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>EdgeQueryInternal</h4>
<pre>public&nbsp;EdgeQueryInternal(java.lang.String&nbsp;tg,
                         boolean&nbsp;readonly,
                         boolean&nbsp;nonice,
                         <a href="../../../gov/usgs/anss/edgethread/EdgeThread.html" title="class in gov.usgs.anss.edgethread">EdgeThread</a>&nbsp;parent)
                  throws java.lang.InstantiationException</pre>
<div class="block">Create a EdgeQueryInternal to access the stored data from a CWB from within the QueryMom
 environment. Certain overall parameters are needed</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tg</code> - Logging tag</dd>
<dd><code>readonly</code> - If the data files are to be open readonly (normally true)</dd>
<dd><code>nonice</code> - Override any nice setting to make this try to run as fast as possible.</dd>
<dd><code>parent</code> - The logging parent EdgeThread - if null, use normal prt() logging.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.InstantiationException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setDebug-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDebug</h4>
<pre>public&nbsp;void&nbsp;setDebug(boolean&nbsp;t)</pre>
</li>
</ul>
<a name="setQueryDebug-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setQueryDebug</h4>
<pre>public&nbsp;void&nbsp;setQueryDebug(boolean&nbsp;t)</pre>
</li>
</ul>
<a name="getLastNDups--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastNDups</h4>
<pre>public&nbsp;int&nbsp;getLastNDups()</pre>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toString()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</li>
</ul>
<a name="toStringBuilder-java.lang.StringBuilder-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toStringBuilder</h4>
<pre>public&nbsp;java.lang.StringBuilder&nbsp;toStringBuilder(java.lang.StringBuilder&nbsp;tmp)</pre>
</li>
</ul>
<a name="freeBlocks-java.util.ArrayList-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>freeBlocks</h4>
<pre>public&nbsp;void&nbsp;freeBlocks(java.util.ArrayList&lt;<a href="../../../gov/usgs/anss/seed/MiniSeed.html" title="class in gov.usgs.anss.seed">MiniSeed</a>&gt;&nbsp;blks)</pre>
<div class="block">This frees all of the blocks on a return ArrayList from a call to query. The ArrayList will be
 empty on return as all blocks are now free.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>blks</code> - TReturned from a call to query() to be freed</dd>
</dl>
</li>
</ul>
<a name="query-java.lang.String-long-double-java.util.ArrayList-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>query</h4>
<pre>public&nbsp;void&nbsp;query(java.lang.String&nbsp;seedname,
                  long&nbsp;begin,
                  double&nbsp;duration,
                  java.util.ArrayList&lt;<a href="../../../gov/usgs/anss/seed/MiniSeed.html" title="class in gov.usgs.anss.seed">MiniSeed</a>&gt;&nbsp;blks)
           throws <a href="../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a>,
                  java.io.IOException</pre>
<div class="block">This is the main routine for a EdgeQueryInternal - it returns miniseed blocks from a query but
 without using the TCP/IP server interface. The return blocks come from the
 EdgeQuery.MiniSeedPool and the user is responsible for freeing them. The normal way is to call
 freeBlocks().
 <p>
 The blocks returned are unsorted and not checked for any problems. If the user needs this done,
 call cleanBlocks().</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>seedname</code> - The seedname or regular expression to get</dd>
<dd><code>begin</code> - The beginning time as a long</dd>
<dd><code>duration</code> - Duration in decimal seconds</dd>
<dd><code>blks</code> - To return the blocks from the EdgeQuery.MiniSeedPool - user must free these blocks
 when done!</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></code></dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="cleanupBlocks-java.util.ArrayList-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>cleanupBlocks</h4>
<pre>public&nbsp;int&nbsp;cleanupBlocks(java.util.ArrayList&lt;<a href="../../../gov/usgs/anss/seed/MiniSeed.html" title="class in gov.usgs.anss.seed">MiniSeed</a>&gt;&nbsp;blks)</pre>
<div class="block">This routines will sort the ArrayList of MiniSEED returned by query(), and eliminate any
 duplicates (including freeing them from the MiniSeedPool.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>blks</code> - The returned ArrayList from a query()</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of duplicates eliminated.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../gov/usgs/cwbquery/EdgeQuery.html" title="class in gov.usgs.cwbquery"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../gov/usgs/cwbquery/EdgeQueryServer.html" title="class in gov.usgs.cwbquery"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?gov/usgs/cwbquery/EdgeQueryInternal.html" target="_top">Frames</a></li>
<li><a href="EdgeQueryInternal.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
