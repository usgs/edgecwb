<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_181) on Fri Feb 22 04:04:45 MST 2019 -->
<title>IndexBlock</title>
<meta name="date" content="2019-02-22">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="IndexBlock";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":9,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":9,"i11":9,"i12":9,"i13":9,"i14":9,"i15":10,"i16":10,"i17":10,"i18":9,"i19":10,"i20":10,"i21":9,"i22":10,"i23":10,"i24":10,"i25":9,"i26":10,"i27":9,"i28":10,"i29":10,"i30":10,"i31":9,"i32":10,"i33":9,"i34":9,"i35":10,"i36":10,"i37":10,"i38":9,"i39":10,"i40":10,"i41":10,"i42":10,"i43":9,"i44":9,"i45":9,"i46":9,"i47":10,"i48":10,"i49":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../gov/usgs/anss/edge/IndexBlockCheck.html" title="class in gov.usgs.anss.edge"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?gov/usgs/anss/edge/IndexBlock.html" target="_top">Frames</a></li>
<li><a href="IndexBlock.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">gov.usgs.anss.edge</div>
<h2 title="Class IndexBlock" class="title">Class IndexBlock</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>gov.usgs.anss.edge.IndexBlock</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.lang.Comparable</dd>
</dl>
<hr>
<br>
<pre>public final class <span class="typeNameLabel">IndexBlock</span>
extends java.lang.Object
implements java.lang.Comparable</pre>
<div class="block">This class handles index blocks for EdgeMom. The physical form is :
 <PRE>
 SeedName (12 char)
 nextIndex(int)
 updateTime (int)
 startingBlock (int), bitmap (long), earliestTime (short), latestTime (short)
 Repeat last MAX_EXTENTS times.
 </PRE> 
 The "real time" (that is EdgeMom usage) creates these blocks for writing and the actual disk
 writes are done through this class insuring the integrity of the index blocks as the data blocks
 are written to disk. The file names for writing are derived from the "julian" day of the data and
 the looked up "edge node" to make unique file names.  It tracks the extents assigned to this index 
 block assigning new ones when needed to complete a data block write.  When this IndexBlock has full
 extents, its last state is written and it becomes a new index block and allocates space for itself 
 in the index file.  It is lazy in writing out update of bits within an extent, but updates itself
 when needed (when an new extent is added, or a long time passes, or the rundown of the IndexFile
 causes all index blocks to be written.  
 <p>
 On reopening an index block at file start, the last extent is read and the blocks that are occupied
 are marked in use to handle the case where the program was terminated abnormally and rundowns did not
 occur.


 <p>
 There are also "readonly" constructors and methods which allow an existing file and index to be
 read back and manipulated for queries and such. The read backs require full file names rather
 that the julian dates and looked up edge node since these methods might be used on other
 computers to read data (such as the CWB).</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#MAX_EXTENTS">MAX_EXTENTS</a></span></code>
<div class="block">this is the number of extents in one index block (block#, bit maps, earliest/latest times)</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#IndexBlock-byte:A-int-int-gov.usgs.anss.edge.RawDisk-">IndexBlock</a></span>(byte[]&nbsp;bf,
          int&nbsp;blk,
          int&nbsp;jul,
          <a href="../../../../gov/usgs/anss/edge/RawDisk.html" title="class in gov.usgs.anss.edge">RawDisk</a>&nbsp;rw)</code>
<div class="block">not used in real time, but allow a utility program to make an index block from 512 bytes a
 julian and block number</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#IndexBlock-gov.usgs.anss.edge.IndexFile-java.lang.StringBuilder-">IndexBlock</a></span>(<a href="../../../../gov/usgs/anss/edge/IndexFile.html" title="class in gov.usgs.anss.edge">IndexFile</a>&nbsp;ifile,
          java.lang.StringBuilder&nbsp;name)</code>
<div class="block">creates a new instance of IndexBlock for the given seedname in the give Index.</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#IndexBlock-java.lang.StringBuilder-int-boolean-">IndexBlock</a></span>(java.lang.StringBuilder&nbsp;sdname,
          int&nbsp;jul,
          boolean&nbsp;first)</code>
<div class="block">creates a new instance of Index block.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#IndexBlock-java.lang.StringBuilder-int-int-">IndexBlock</a></span>(java.lang.StringBuilder&nbsp;name,
          int&nbsp;jul,
          int&nbsp;blk)</code>
<div class="block">creates a new instance of Index block pointing to the iblk block.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#addExtent--">addExtent</a></span>()</code>
<div class="block">add an extent to this index, if the extents are full this will allocate a new index block,
 update forward index pointer to this block, make a final write of this block, and then set up
 this object to use the newly allocated block with cleared parameters</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#addExtentIndexOnly-int-">addExtentIndexOnly</a></span>(int&nbsp;blck)</code>
<div class="block">add an extent to this index, this routine is for rebuilding index, so the iblk is used to
 determine the extent, update forward index pointer to this block, make a final write of this
 block, and then set up this object to use the newly allocated block with cleared parameters</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#closeJulian-int-">closeJulian</a></span>(int&nbsp;jul)</code>
<div class="block">close/write all index block that are open for a given julian day.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#compareTo-java.lang.Object-">compareTo</a></span>(java.lang.Object&nbsp;o)</code>
<div class="block">compares two index blocks for ordering</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getBitMap-int-">getBitMap</a></span>(int&nbsp;i)</code>
<div class="block">Get the bitmap of the extent with index <code>i</code>.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>long[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getBitMaps--">getBitMaps</a></span>()</code>
<div class="block">return the array with bit maps representing usage of the extents</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getCurrentExtent--">getCurrentExtent</a></span>()</code>
<div class="block">Return the current extents block.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getEarliestTime-int-">getEarliestTime</a></span>(int&nbsp;i)</code>
<div class="block">Get the earliest time of the extent with index <code>i</code>.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>int[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getExtents--">getExtents</a></span>()</code>
<div class="block">return the array of starting blocks for the extents allocated to this index block</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getHash--">getHash</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getHash-java.lang.StringBuilder-int-">getHash</a></span>(java.lang.StringBuilder&nbsp;s,
       int&nbsp;julian)</code>
<div class="block">return the hash code for a 12 character seedname and julian used for IndexBlocks.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getHashOld-java.lang.StringBuilder-int-">getHashOld</a></span>(java.lang.StringBuilder&nbsp;s,
          int&nbsp;julian)</code>&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getHashSBNew-java.lang.StringBuilder-">getHashSBNew</a></span>(java.lang.StringBuilder&nbsp;s)</code>
<div class="block">This taks first and last character coded to 37 states adds them and shifts them by 74.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>static <a href="../../../../gov/usgs/anss/edge/IndexBlock.html" title="class in gov.usgs.anss.edge">IndexBlock</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getIndexBlock-java.lang.StringBuilder-int-">getIndexBlock</a></span>(java.lang.StringBuilder&nbsp;sn,
             int&nbsp;jul)</code>
<div class="block">/** given a seed name and julian day, return the already existing index block</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getIndexBlockHashCode-java.lang.StringBuilder-int-">getIndexBlockHashCode</a></span>(java.lang.StringBuilder&nbsp;sn,
                     int&nbsp;jul)</code>
<div class="block">/** given a seed name and julian day, return the unique hash code for this block</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getIndexBlockNumber--">getIndexBlockNumber</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getJulian--">getJulian</a></span>()</code>
<div class="block">get the julian day of this file</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getLatestTime-int-">getLatestTime</a></span>(int&nbsp;i)</code>
<div class="block">Get the latest time of the extent with index <code>i</code>.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getMonitorString--">getMonitorString</a></span>()</code>
<div class="block">return a monitor string for this class</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getNextBlock--">getNextBlock</a></span>()</code>
<div class="block">Return the next block in the extent to use</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getNextIndex--">getNextIndex</a></span>()</code>
<div class="block">return the next index block number (-1 means there is none)</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getNio--">getNio</a></span>()</code>
<div class="block">return the number of IOs performed (incremented once for each mini-seed write)</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getNumExtents--">getNumExtents</a></span>()</code>
<div class="block">Get the number of extents referred to by this IndexBlock.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>java.lang.StringBuilder</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getSeedName--">getSeedName</a></span>()</code>
<div class="block">return the 12 character seed channel name</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#getUpdateTime--">getUpdateTime</a></span>()</code>
<div class="block">return the update time of this block</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#init--">init</a></span>()</code>
<div class="block">reset the indexBlocks collection and number of ios if it has not yet been done</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#isModified--">isModified</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#main-java.lang.String:A-">main</a></span>(java.lang.String[]&nbsp;args)</code>
<div class="block">main test unit</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#markBlocksUsed-int-int-">markBlocksUsed</a></span>(int&nbsp;block,
              int&nbsp;nblks)</code>
<div class="block">mark a block of the current extent as in use, should be done as data are written into the
 extent.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#newIndexOnlyStart--">newIndexOnlyStart</a></span>()</code>
<div class="block">used by rebuildIndex to reset a newly created index chain so the extent allocated in
 constructor is discarded</div>
</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#nextIndexBlock--">nextIndexBlock</a></span>()</code>
<div class="block">Advance this index block to the next one in the chain, return true if it change false if this
 is the last block of the chain</div>
</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#registerHoldingSender-gov.usgs.anss.edgemom.HoldingSender-">registerHoldingSender</a></span>(<a href="../../../../gov/usgs/anss/edgemom/HoldingSender.html" title="class in gov.usgs.anss.edgemom">HoldingSender</a>&nbsp;hs)</code>
<div class="block">set up a UdpHoldings sender with this IndexBlock class</div>
</td>
</tr>
<tr id="i32" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#reload-byte:A-int-">reload</a></span>(byte[]&nbsp;bf,
      int&nbsp;blk)</code>
<div class="block">this is not used in the realtime system.</div>
</td>
</tr>
<tr id="i33" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#setDebug-boolean-">setDebug</a></span>(boolean&nbsp;t)</code>
<div class="block">set debug state</div>
</td>
</tr>
<tr id="i34" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#setDebugBlocks-boolean-">setDebugBlocks</a></span>(boolean&nbsp;t)</code>
<div class="block">set the debug blocks state</div>
</td>
</tr>
<tr id="i35" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#setNextIndex-int-">setNextIndex</a></span>(int&nbsp;idx)</code>
<div class="block">set the next index pointer for this block, normally called when a new index is needed for a
 channel.</div>
</td>
</tr>
<tr id="i36" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#setNextIndexFix-int-">setNextIndexFix</a></span>(int&nbsp;idx)</code>
<div class="block">set the next index pointer for this block, normally called when a new index is needed for a
 channel.</div>
</td>
</tr>
<tr id="i37" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#setSeedname-java.lang.StringBuilder-">setSeedname</a></span>(java.lang.StringBuilder&nbsp;s)</code>
<div class="block">Set the seedname, this should only be done very carefully!</div>
</td>
</tr>
<tr id="i38" class="altColor">
<td class="colFirst"><code>static java.lang.StringBuilder</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#timeToString-int-java.lang.StringBuilder-">timeToString</a></span>(int&nbsp;time,
            java.lang.StringBuilder&nbsp;tmp)</code>
<div class="block">convert a earliest or latest time to a string.</div>
</td>
</tr>
<tr id="i39" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#toString--">toString</a></span>()</code>
<div class="block">create a string representing this index block</div>
</td>
</tr>
<tr id="i40" class="altColor">
<td class="colFirst"><code>java.lang.StringBuilder</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#toStringBuilder-java.lang.StringBuilder-">toStringBuilder</a></span>(java.lang.StringBuilder&nbsp;tmp)</code>&nbsp;</td>
</tr>
<tr id="i41" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#toStringDetail-boolean-int-java.util.BitSet-">toStringDetail</a></span>(boolean&nbsp;errOnly,
              int&nbsp;readData,
              java.util.BitSet&nbsp;blockMap)</code>&nbsp;</td>
</tr>
<tr id="i42" class="altColor">
<td class="colFirst"><code>java.lang.StringBuilder</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#toStringDetailSB-boolean-int-java.util.BitSet-">toStringDetailSB</a></span>(boolean&nbsp;errOnly,
                int&nbsp;readData,
                java.util.BitSet&nbsp;blockMap)</code>
<div class="block">return a detailed string about this index block</div>
</td>
</tr>
<tr id="i43" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#updateJulian-int-">updateJulian</a></span>(int&nbsp;jul)</code>
<div class="block">updateJulian causes all Index Block being held for a julian day to be written to disk, and
 perhaps more importantly, to the EdgeBlockQueue so that the replicators get fresh copies! This
 is triggered by the IndexFileServer after sending out a copy of the index file, it triggers one
 of these so the index file is updated with any cached data for the index blocks.</div>
</td>
</tr>
<tr id="i44" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#writeMiniSeed-gov.usgs.anss.seed.MiniSeed-java.lang.String-">writeMiniSeed</a></span>(<a href="../../../../gov/usgs/anss/seed/MiniSeed.html" title="class in gov.usgs.anss.seed">MiniSeed</a>&nbsp;ms,
             java.lang.String&nbsp;tag)</code>
<div class="block">write a miniseed block of length len into this file.</div>
</td>
</tr>
<tr id="i45" class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#writeMiniSeedCheckMidnight-gov.usgs.anss.seed.MiniSeed-boolean-boolean-java.lang.String-gov.usgs.anss.edgethread.EdgeThread-">writeMiniSeedCheckMidnight</a></span>(<a href="../../../../gov/usgs/anss/seed/MiniSeed.html" title="class in gov.usgs.anss.seed">MiniSeed</a>&nbsp;ms,
                          boolean&nbsp;sendHydra,
                          boolean&nbsp;allow4k,
                          java.lang.String&nbsp;tag,
                          <a href="../../../../gov/usgs/anss/edgethread/EdgeThread.html" title="class in gov.usgs.anss.edgethread">EdgeThread</a>&nbsp;par)</code>
<div class="block">Main writer of miniseed data to disk</div>
</td>
</tr>
<tr id="i46" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#writeMiniSeedCheckMidnight-gov.usgs.anss.seed.MiniSeed-boolean-java.lang.String-gov.usgs.anss.edgethread.EdgeThread-">writeMiniSeedCheckMidnight</a></span>(<a href="../../../../gov/usgs/anss/seed/MiniSeed.html" title="class in gov.usgs.anss.seed">MiniSeed</a>&nbsp;ms,
                          boolean&nbsp;sendHydra,
                          java.lang.String&nbsp;tag,
                          <a href="../../../../gov/usgs/anss/edgethread/EdgeThread.html" title="class in gov.usgs.anss.edgethread">EdgeThread</a>&nbsp;par)</code>
<div class="block">Main writer of miniseed data to disk</div>
</td>
</tr>
<tr id="i47" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#writeMS-gov.usgs.anss.seed.MiniSeed-">writeMS</a></span>(<a href="../../../../gov/usgs/anss/seed/MiniSeed.html" title="class in gov.usgs.anss.seed">MiniSeed</a>&nbsp;ms)</code>
<div class="block">write a mini-seed block to disk for this IndexBlock (creates log for this index Blocks writes)</div>
</td>
</tr>
<tr id="i48" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#writeMSIndexOnly-gov.usgs.anss.seed.MiniSeed-int-">writeMSIndexOnly</a></span>(<a href="../../../../gov/usgs/anss/seed/MiniSeed.html" title="class in gov.usgs.anss.seed">MiniSeed</a>&nbsp;ms,
                int&nbsp;blk)</code>
<div class="block">write a mini-seed block to disk for this IndexBlock (creates log for this index Blocks
 writes).This is used to rebuild an index usually by reading a series of miniseed blocks from
 the data file.</div>
</td>
</tr>
<tr id="i49" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/edge/IndexBlock.html#writeStale-long-">writeStale</a></span>(long&nbsp;msec)</code>
<div class="block">write all index block that are a certain age without update and modified.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="MAX_EXTENTS">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MAX_EXTENTS</h4>
<pre>public static final&nbsp;int MAX_EXTENTS</pre>
<div class="block">this is the number of extents in one index block (block#, bit maps, earliest/latest times)</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#gov.usgs.anss.edge.IndexBlock.MAX_EXTENTS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="IndexBlock-gov.usgs.anss.edge.IndexFile-java.lang.StringBuilder-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>IndexBlock</h4>
<pre>public&nbsp;IndexBlock(<a href="../../../../gov/usgs/anss/edge/IndexFile.html" title="class in gov.usgs.anss.edge">IndexFile</a>&nbsp;ifile,
                  java.lang.StringBuilder&nbsp;name)
           throws <a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a>,
                  java.io.IOException,
                  <a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a></pre>
<div class="block">creates a new instance of IndexBlock for the given seedname in the give Index. This method is
 used by the Query tool and other "read only" uses of the files. The IndexFile must, of course,
 be open and can (or should) be read only.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>name</code> - The 12 character seedName (must pass MasterBlock.checkSeedName()</dd>
<dd><code>ifile</code> - The previously opened IndexFile to use to read the blocks</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></code> - if name does not pass MasterBlock.checkSeedName()</dd>
<dd><code>java.io.IOException</code> - If this block cannot be created.</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a></code> - if channel is not available to
 compute hash code</dd>
</dl>
</li>
</ul>
<a name="IndexBlock-java.lang.StringBuilder-int-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>IndexBlock</h4>
<pre>public&nbsp;IndexBlock(java.lang.StringBuilder&nbsp;sdname,
                  int&nbsp;jul,
                  boolean&nbsp;first)
           throws <a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a>,
                  java.io.IOException,
                  <a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a>,
                  <a href="../../../../gov/usgs/anss/edge/EdgeFileReadOnlyException.html" title="class in gov.usgs.anss.edge">EdgeFileReadOnlyException</a>,
                  <a href="../../../../gov/usgs/anss/edge/DuplicateIndexBlockCreatedException.html" title="class in gov.usgs.anss.edge">DuplicateIndexBlockCreatedException</a></pre>
<div class="block">creates a new instance of Index block. Used by writeMiniSeed() when the index has not yet been
 created on an Edge. This call requires the IndexFile for this julian day to have been created
 and be open. If not an I/O error is likely.

 If the block already exists, it is read and the last extent determined. This extend is read and
 the bit map made to agree with the number of blocks used in the extent (Uses non-zero filled to
 allow membership).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sdname</code> - The 12 character seedName (must pass MasterBlock.checkSeedName()</dd>
<dd><code>jul</code> - The julian day to open for this component</dd>
<dd><code>first</code> - If true, return the first index block in the chain for the record if not, return
 the last index block in chain ready for writing!</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></code> - If name does not pass MasterBlock.checkSeedName()</dd>
<dd><code>java.io.IOException</code> - If this block cannot be created.</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a></code> - if this block cannot be allocated</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/EdgeFileReadOnlyException.html" title="class in gov.usgs.anss.edge">EdgeFileReadOnlyException</a></code> - Cannot create writable IndexBlock on readonly file</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/DuplicateIndexBlockCreatedException.html" title="class in gov.usgs.anss.edge">DuplicateIndexBlockCreatedException</a></code> - If first is set and this seedname index block has
 already been created</dd>
</dl>
</li>
</ul>
<a name="IndexBlock-java.lang.StringBuilder-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>IndexBlock</h4>
<pre>public&nbsp;IndexBlock(java.lang.StringBuilder&nbsp;name,
                  int&nbsp;jul,
                  int&nbsp;blk)
           throws <a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a>,
                  java.io.IOException,
                  <a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a></pre>
<div class="block">creates a new instance of Index block pointing to the iblk block. It appears that is method of
 creating a block is out of favor (I found no usages in 3/2006).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>name</code> - The 12 character seedName (must pass MasterBlock.checkSeedName()</dd>
<dd><code>jul</code> - The julian day to open for this component</dd>
<dd><code>blk</code> - The block number in index file to read and open for writing.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></code> - If name does not pass MasterBlock.checkSeedName()</dd>
<dd><code>java.io.IOException</code> - If this block cannot be created.</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a></code> - If channel is not available to
 compute hash code.</dd>
</dl>
</li>
</ul>
<a name="IndexBlock-byte:A-int-int-gov.usgs.anss.edge.RawDisk-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>IndexBlock</h4>
<pre>public&nbsp;IndexBlock(byte[]&nbsp;bf,
                  int&nbsp;blk,
                  int&nbsp;jul,
                  <a href="../../../../gov/usgs/anss/edge/RawDisk.html" title="class in gov.usgs.anss.edge">RawDisk</a>&nbsp;rw)
           throws <a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a></pre>
<div class="block">not used in real time, but allow a utility program to make an index block from 512 bytes a
 julian and block number</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>bf</code> - 512 bytes of index block</dd>
<dd><code>blk</code> - The block offset in the index file of this index block</dd>
<dd><code>jul</code> - The julian day for this file</dd>
<dd><code>rw</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a></code> - if hash code cannot be computed
 because channel is not available</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setSeedname-java.lang.StringBuilder-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSeedname</h4>
<pre>public&nbsp;void&nbsp;setSeedname(java.lang.StringBuilder&nbsp;s)
                 throws java.io.IOException</pre>
<div class="block">Set the seedname, this should only be done very carefully!</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>s</code> - New 12 character seedname</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="setDebug-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDebug</h4>
<pre>public static&nbsp;void&nbsp;setDebug(boolean&nbsp;t)</pre>
<div class="block">set debug state</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>t</code> - if true, turn on debugging</dd>
</dl>
</li>
</ul>
<a name="getMonitorString--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMonitorString</h4>
<pre>public static&nbsp;java.lang.String&nbsp;getMonitorString()</pre>
<div class="block">return a monitor string for this class</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The string</dd>
</dl>
</li>
</ul>
<a name="isModified--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isModified</h4>
<pre>public&nbsp;boolean&nbsp;isModified()</pre>
</li>
</ul>
<a name="registerHoldingSender-gov.usgs.anss.edgemom.HoldingSender-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerHoldingSender</h4>
<pre>public static&nbsp;void&nbsp;registerHoldingSender(<a href="../../../../gov/usgs/anss/edgemom/HoldingSender.html" title="class in gov.usgs.anss.edgemom">HoldingSender</a>&nbsp;hs)</pre>
<div class="block">set up a UdpHoldings sender with this IndexBlock class</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>hs</code> - Is the holding sender to register</dd>
</dl>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toString()</pre>
<div class="block">create a string representing this index block</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The block number, seedname, julian date, # extents, and next index annotated</dd>
</dl>
</li>
</ul>
<a name="toStringBuilder-java.lang.StringBuilder-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toStringBuilder</h4>
<pre>public&nbsp;java.lang.StringBuilder&nbsp;toStringBuilder(java.lang.StringBuilder&nbsp;tmp)</pre>
</li>
</ul>
<a name="timeToString-int-java.lang.StringBuilder-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>timeToString</h4>
<pre>public static&nbsp;java.lang.StringBuilder&nbsp;timeToString(int&nbsp;time,
                                                   java.lang.StringBuilder&nbsp;tmp)</pre>
<div class="block">convert a earliest or latest time to a string.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>time</code> - The time encoded as 3s of seconds since midnight</dd>
<dd><code>tmp</code> - A string builder to append or if null an internal one is returned</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The formated string</dd>
</dl>
</li>
</ul>
<a name="toStringDetail-boolean-int-java.util.BitSet-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toStringDetail</h4>
<pre>public&nbsp;java.lang.String&nbsp;toStringDetail(boolean&nbsp;errOnly,
                                       int&nbsp;readData,
                                       java.util.BitSet&nbsp;blockMap)</pre>
</li>
</ul>
<a name="toStringDetailSB-boolean-int-java.util.BitSet-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toStringDetailSB</h4>
<pre>public&nbsp;java.lang.StringBuilder&nbsp;toStringDetailSB(boolean&nbsp;errOnly,
                                                int&nbsp;readData,
                                                java.util.BitSet&nbsp;blockMap)</pre>
<div class="block">return a detailed string about this index block</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>errOnly</code> - Only list errors</dd>
<dd><code>readData</code> - 0=don't, 1=read and list errors only, 2=read display and list errors</dd>
<dd><code>blockMap</code> - A bit set return with list of extents in use (an extent is 64 blocks long)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>String representing this block in detail including errors/inconsistencies found</dd>
</dl>
</li>
</ul>
<a name="init--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>public static&nbsp;void&nbsp;init()</pre>
<div class="block">reset the indexBlocks collection and number of ios if it has not yet been done</div>
</li>
</ul>
<a name="writeMiniSeedCheckMidnight-gov.usgs.anss.seed.MiniSeed-boolean-boolean-java.lang.String-gov.usgs.anss.edgethread.EdgeThread-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeMiniSeedCheckMidnight</h4>
<pre>public static&nbsp;boolean&nbsp;writeMiniSeedCheckMidnight(<a href="../../../../gov/usgs/anss/seed/MiniSeed.html" title="class in gov.usgs.anss.seed">MiniSeed</a>&nbsp;ms,
                                                 boolean&nbsp;sendHydra,
                                                 boolean&nbsp;allow4k,
                                                 java.lang.String&nbsp;tag,
                                                 <a href="../../../../gov/usgs/anss/edgethread/EdgeThread.html" title="class in gov.usgs.anss.edgethread">EdgeThread</a>&nbsp;par)
                                          throws <a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></pre>
<div class="block">Main writer of miniseed data to disk</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ms</code> - The miniseed block to write</dd>
<dd><code>sendHydra</code> - - if true this block is forwarded to Hydra</dd>
<dd><code>allow4k</code> - If true, 4 k buffers will go into the edge instead of being converted to 512s</dd>
<dd><code>tag</code> - A descriptive tag for the submitter of this data (for debug and error feedback)</dd>
<dd><code>par</code> - The EdgeThread caller mainly to allow logging to go to right place</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if block was written</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></code> - if same is found decoding the miniseed</dd>
</dl>
</li>
</ul>
<a name="getNio--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNio</h4>
<pre>public static&nbsp;long&nbsp;getNio()</pre>
<div class="block">return the number of IOs performed (incremented once for each mini-seed write)</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Number of IOs performed as a long</dd>
</dl>
</li>
</ul>
<a name="writeMiniSeedCheckMidnight-gov.usgs.anss.seed.MiniSeed-boolean-java.lang.String-gov.usgs.anss.edgethread.EdgeThread-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeMiniSeedCheckMidnight</h4>
<pre>public static&nbsp;boolean&nbsp;writeMiniSeedCheckMidnight(<a href="../../../../gov/usgs/anss/seed/MiniSeed.html" title="class in gov.usgs.anss.seed">MiniSeed</a>&nbsp;ms,
                                                 boolean&nbsp;sendHydra,
                                                 java.lang.String&nbsp;tag,
                                                 <a href="../../../../gov/usgs/anss/edgethread/EdgeThread.html" title="class in gov.usgs.anss.edgethread">EdgeThread</a>&nbsp;par)
                                          throws <a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></pre>
<div class="block">Main writer of miniseed data to disk</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ms</code> - The miniseed block to write</dd>
<dd><code>sendHydra</code> - - if true this block is forwarded to Hydra</dd>
<dd><code>tag</code> - A descriptive tag for the submitter of this data (for debug and error feedback)</dd>
<dd><code>par</code> - The EdgeThread caller mainly to allow logging to go to right place</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if block was written</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></code> - if same is found decoding the miniseed</dd>
</dl>
</li>
</ul>
<a name="writeMiniSeed-gov.usgs.anss.seed.MiniSeed-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeMiniSeed</h4>
<pre>public static&nbsp;boolean&nbsp;writeMiniSeed(<a href="../../../../gov/usgs/anss/seed/MiniSeed.html" title="class in gov.usgs.anss.seed">MiniSeed</a>&nbsp;ms,
                                    java.lang.String&nbsp;tag)
                             throws <a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></pre>
<div class="block">write a miniseed block of length len into this file. We will find the Mini-seed Actual writing
 to a day file occurs in the IndexFile.writeMiniSeed() but this class has to handle everything
 that can happen before a currently open day file indexBlock can be used 1) Verify that the seed
 name make sense, 2) If the julian date is out of the range, this sends data to the future or
 old file 3) If the index is not found in the TreeMap of open indices, it is opened/create 4)
 IndexBlock.writeMiniSeed() is called to put the data in the day file using the index block
 created (this is a non-static call) - bit maps etc are updated there</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ms</code> - The mini-seed block to write out</dd>
<dd><code>tag</code> - A tag representing who wrote this block for debug purposes</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>false if image is shutting down and no new input is allowed.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></code> - if it the mini-seed name does not pass MasterBlock.chkSeedname</dd>
</dl>
</li>
</ul>
<a name="getHash-java.lang.StringBuilder-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHash</h4>
<pre>public static&nbsp;long&nbsp;getHash(java.lang.StringBuilder&nbsp;s,
                           int&nbsp;julian)
                    throws <a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a></pre>
<div class="block">return the hash code for a 12 character seedname and julian used for IndexBlocks. T
 <br>
 If run as part of a EdgeMom type process where there is an EdgeChannelServer object, the has
 code is the ID from the channel shifted by 32 ORed with the julian date. This is unique for all
 defined channels. An Exception is thrown if the channel is not in the EdgeChannelServer.
 <br>
 If there is no EdgeChannelServer object, this code is the Util.getHashSB(seedname) as a long,
 left shifted by 24 bits. and ORed with the julian day *6. This puts the julian day in the lower
 3 bytes and the channel hash in the upper 5 bytes. If there are hash code conflicts then up to
 6 can be configured under the one code.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>s</code> - The 12 character seedname to hash using the ID from the EdgeChannelServer</dd>
<dd><code>julian</code> - The julian day for the lower portion</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A hash code.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a></code> - if channel is not available to
 compute hash code</dd>
</dl>
</li>
</ul>
<a name="getHashOld-java.lang.StringBuilder-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHashOld</h4>
<pre>public static&nbsp;long&nbsp;getHashOld(java.lang.StringBuilder&nbsp;s,
                              int&nbsp;julian)</pre>
</li>
</ul>
<a name="getHashSBNew-java.lang.StringBuilder-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHashSBNew</h4>
<pre>public static&nbsp;long&nbsp;getHashSBNew(java.lang.StringBuilder&nbsp;s)</pre>
<div class="block">This taks first and last character coded to 37 states adds them and shifts them by 74. This
 works well for SeedNames because 74^6 =1.642e11 < 2<39 = 5.49e11 so it fits in 39 bits. When
 shifted by 24 and then adding the julian this should give a unique hash code every time. The
 chances of the two encodings being offset by equal amounts to some other set seems unlikely.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>s</code> - @return</dd>
</dl>
</li>
</ul>
<a name="getIndexBlock-java.lang.StringBuilder-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndexBlock</h4>
<pre>public static&nbsp;<a href="../../../../gov/usgs/anss/edge/IndexBlock.html" title="class in gov.usgs.anss.edge">IndexBlock</a>&nbsp;getIndexBlock(java.lang.StringBuilder&nbsp;sn,
                                       int&nbsp;jul)
                                throws <a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a></pre>
<div class="block">/** given a seed name and julian day, return the already existing index block</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sn</code> - The 12 character seedname</dd>
<dd><code>jul</code> - The julian day</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The index block, null if it has not previously been created. DO synchronize this code,
 it always seems to lead to a dead lock I do not understand</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a></code> - if channel is not available to
 compute hash code</dd>
</dl>
</li>
</ul>
<a name="getIndexBlockHashCode-java.lang.StringBuilder-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndexBlockHashCode</h4>
<pre>public static&nbsp;long&nbsp;getIndexBlockHashCode(java.lang.StringBuilder&nbsp;sn,
                                         int&nbsp;jul)
                                  throws <a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a></pre>
<div class="block">/** given a seed name and julian day, return the unique hash code for this block</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sn</code> - The 12 character seedname</dd>
<dd><code>jul</code> - The julian day</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The index block hash code if the block exists, or the one which would be assigned to it
 now if it does not. DO synchronize this code, it always seems to lead to a dead lock I do not
 understand</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a></code> - if channel is not available to
 compute hash code</dd>
</dl>
</li>
</ul>
<a name="updateJulian-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateJulian</h4>
<pre>public static&nbsp;void&nbsp;updateJulian(int&nbsp;jul)</pre>
<div class="block">updateJulian causes all Index Block being held for a julian day to be written to disk, and
 perhaps more importantly, to the EdgeBlockQueue so that the replicators get fresh copies! This
 is triggered by the IndexFileServer after sending out a copy of the index file, it triggers one
 of these so the index file is updated with any cached data for the index blocks.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>jul</code> - The julian day about to be closed.</dd>
</dl>
</li>
</ul>
<a name="closeJulian-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeJulian</h4>
<pre>public static&nbsp;int&nbsp;closeJulian(int&nbsp;jul)</pre>
<div class="block">close/write all index block that are open for a given julian day. Called by IndexFile when a
 day file is about to be closed to insure no attempts to write through the index blocks will
 occur</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>jul</code> - The julian day about to be closed.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of index blocks removed from the indexBlocks hash</dd>
</dl>
</li>
</ul>
<a name="writeStale-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeStale</h4>
<pre>public static&nbsp;void&nbsp;writeStale(long&nbsp;msec)</pre>
<div class="block">write all index block that are a certain age without update and modified. Called by IndexFile
 periodically to insure that end-of-day index blocks get written out.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>msec</code> - The age at which the block is considered stale and will be written in millis</dd>
</dl>
</li>
</ul>
<a name="newIndexOnlyStart--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newIndexOnlyStart</h4>
<pre>public&nbsp;void&nbsp;newIndexOnlyStart()</pre>
<div class="block">used by rebuildIndex to reset a newly created index chain so the extent allocated in
 constructor is discarded</div>
</li>
</ul>
<a name="reload-byte:A-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reload</h4>
<pre>public final&nbsp;void&nbsp;reload(byte[]&nbsp;bf,
                         int&nbsp;blk)</pre>
<div class="block">this is not used in the realtime system. It is present so that an program can provide a
 bytebuffer with an index block in it loading</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>bf</code> - A byte array with a 512 byte index block in it</dd>
<dd><code>blk</code> - block number in the index file</dd>
</dl>
</li>
</ul>
<a name="setNextIndex-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setNextIndex</h4>
<pre>public&nbsp;void&nbsp;setNextIndex(int&nbsp;idx)
                  throws java.io.IOException</pre>
<div class="block">set the next index pointer for this block, normally called when a new index is needed for a
 channel. This effectively closes out the use of this index file for writing</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>idx</code> - The next Index block value.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If this index block cannot be written out for some reason</dd>
</dl>
</li>
</ul>
<a name="setNextIndexFix-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setNextIndexFix</h4>
<pre>public&nbsp;void&nbsp;setNextIndexFix(int&nbsp;idx)
                     throws java.io.IOException</pre>
<div class="block">set the next index pointer for this block, normally called when a new index is needed for a
 channel. This effectively closes out the use of this index file for writing</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>idx</code> - The next Index block value.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If this index block cannot be written out for some reason</dd>
</dl>
</li>
</ul>
<a name="addExtent--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addExtent</h4>
<pre>public final&nbsp;void&nbsp;addExtent()
                     throws java.io.IOException,
                            <a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a>,
                            <a href="../../../../gov/usgs/anss/edge/EdgeFileReadOnlyException.html" title="class in gov.usgs.anss.edge">EdgeFileReadOnlyException</a>,
                            <a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></pre>
<div class="block">add an extent to this index, if the extents are full this will allocate a new index block,
 update forward index pointer to this block, make a final write of this block, and then set up
 this object to use the newly allocated block with cleared parameters</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if the index block write throws one</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a></code> - Really serious, a new index block cannot be obtained.</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/EdgeFileReadOnlyException.html" title="class in gov.usgs.anss.edge">EdgeFileReadOnlyException</a></code> - This file is read only so you cannot allocate new extents</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></code> - Should never be thrown, but if seedname is corrupt it will be.</dd>
</dl>
</li>
</ul>
<a name="addExtentIndexOnly-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addExtentIndexOnly</h4>
<pre>public&nbsp;void&nbsp;addExtentIndexOnly(int&nbsp;blck)
                        throws java.io.IOException,
                               <a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a>,
                               <a href="../../../../gov/usgs/anss/edge/EdgeFileReadOnlyException.html" title="class in gov.usgs.anss.edge">EdgeFileReadOnlyException</a></pre>
<div class="block">add an extent to this index, this routine is for rebuilding index, so the iblk is used to
 determine the extent, update forward index pointer to this block, make a final write of this
 block, and then set up this object to use the newly allocated block with cleared parameters</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>blck</code> - The data block number for which the extent needs to be added</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if the index block write throws one</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a></code> - Really serious, a new index block cannot be obtained.</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/EdgeFileReadOnlyException.html" title="class in gov.usgs.anss.edge">EdgeFileReadOnlyException</a></code> - This file is read only so you cannot allocate new extents</dd>
</dl>
</li>
</ul>
<a name="getIndexBlockNumber--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndexBlockNumber</h4>
<pre>public&nbsp;int&nbsp;getIndexBlockNumber()</pre>
</li>
</ul>
<a name="getNextBlock--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNextBlock</h4>
<pre>public&nbsp;int&nbsp;getNextBlock()</pre>
<div class="block">Return the next block in the extent to use</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The next block to use in the current extent</dd>
</dl>
</li>
</ul>
<a name="getCurrentExtent--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentExtent</h4>
<pre>public&nbsp;int&nbsp;getCurrentExtent()</pre>
<div class="block">Return the current extents block.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The current extents starting block</dd>
</dl>
</li>
</ul>
<a name="getNumExtents--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumExtents</h4>
<pre>public&nbsp;int&nbsp;getNumExtents()</pre>
<div class="block">Get the number of extents referred to by this IndexBlock.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the number of extents</dd>
</dl>
</li>
</ul>
<a name="getBitMap-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBitMap</h4>
<pre>public&nbsp;long&nbsp;getBitMap(int&nbsp;i)</pre>
<div class="block">Get the bitmap of the extent with index <code>i</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>i</code> - the index</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a long bitmap indicating which blocks are used in the extent</dd>
</dl>
</li>
</ul>
<a name="getEarliestTime-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEarliestTime</h4>
<pre>public&nbsp;int&nbsp;getEarliestTime(int&nbsp;i)</pre>
<div class="block">Get the earliest time of the extent with index <code>i</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>i</code> - the index</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the earliest time represented by the extent</dd>
</dl>
</li>
</ul>
<a name="getLatestTime-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLatestTime</h4>
<pre>public&nbsp;int&nbsp;getLatestTime(int&nbsp;i)</pre>
<div class="block">Get the latest time of the extent with index <code>i</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>i</code> - the index</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the latest time represented by the extent</dd>
</dl>
</li>
</ul>
<a name="markBlocksUsed-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markBlocksUsed</h4>
<pre>public&nbsp;void&nbsp;markBlocksUsed(int&nbsp;block,
                           int&nbsp;nblks)</pre>
<div class="block">mark a block of the current extent as in use, should be done as data are written into the
 extent. If writer always getNextBlock() and then write, then call this routine, the bit maps
 will be correct and nextBlock will work!</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>block</code> - The block number used (0-64)</dd>
<dd><code>nblks</code> - The number of blocks used</dd>
</dl>
</li>
</ul>
<a name="setDebugBlocks-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDebugBlocks</h4>
<pre>public static&nbsp;void&nbsp;setDebugBlocks(boolean&nbsp;t)</pre>
<div class="block">set the debug blocks state</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>t</code> - The state to set it to</dd>
</dl>
</li>
</ul>
<a name="writeMS-gov.usgs.anss.seed.MiniSeed-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeMS</h4>
<pre>public&nbsp;int&nbsp;writeMS(<a href="../../../../gov/usgs/anss/seed/MiniSeed.html" title="class in gov.usgs.anss.seed">MiniSeed</a>&nbsp;ms)
            throws java.io.IOException,
                   <a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a>,
                   <a href="../../../../gov/usgs/anss/edge/EdgeFileReadOnlyException.html" title="class in gov.usgs.anss.edge">EdgeFileReadOnlyException</a>,
                   <a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></pre>
<div class="block">write a mini-seed block to disk for this IndexBlock (creates log for this index Blocks writes)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ms</code> - The miniseed block to write</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The block number written to in data file</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if writing causes one</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a></code> - if a new blocks needed be cannot be obtained</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/EdgeFileReadOnlyException.html" title="class in gov.usgs.anss.edge">EdgeFileReadOnlyException</a></code> - If this file is read only, it cannot be written!</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></code> - Should not be possible, but if the seedname is bad, it will be</dd>
</dl>
</li>
</ul>
<a name="writeMSIndexOnly-gov.usgs.anss.seed.MiniSeed-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeMSIndexOnly</h4>
<pre>public&nbsp;void&nbsp;writeMSIndexOnly(<a href="../../../../gov/usgs/anss/seed/MiniSeed.html" title="class in gov.usgs.anss.seed">MiniSeed</a>&nbsp;ms,
                             int&nbsp;blk)
                      throws java.io.IOException,
                             <a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a>,
                             <a href="../../../../gov/usgs/anss/edge/EdgeFileReadOnlyException.html" title="class in gov.usgs.anss.edge">EdgeFileReadOnlyException</a></pre>
<div class="block">write a mini-seed block to disk for this IndexBlock (creates log for this index Blocks
 writes).This is used to rebuild an index usually by reading a series of miniseed blocks from
 the data file.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ms</code> - The miniseed block to write</dd>
<dd><code>blk</code> - The data block number to write this block to (gives mask and startingBlock)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if writing causes one</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/EdgeFileCannotAllocateException.html" title="class in gov.usgs.anss.edge">EdgeFileCannotAllocateException</a></code> - if a new blocks needed be cannot be obtained</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/EdgeFileReadOnlyException.html" title="class in gov.usgs.anss.edge">EdgeFileReadOnlyException</a></code> - If this file is read only, it cannot be written!</dd>
</dl>
</li>
</ul>
<a name="nextIndexBlock--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nextIndexBlock</h4>
<pre>public&nbsp;boolean&nbsp;nextIndexBlock()
                       throws java.io.IOException</pre>
<div class="block">Advance this index block to the next one in the chain, return true if it change false if this
 is the last block of the chain</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True if a new block is positioned, false if it is already last block in chain</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if the nextIndexBLock cannot be read</dd>
</dl>
</li>
</ul>
<a name="getExtents--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExtents</h4>
<pre>public&nbsp;int[]&nbsp;getExtents()</pre>
<div class="block">return the array of starting blocks for the extents allocated to this index block</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Integer array of block numbers of the starts of 64 block extents allocated</dd>
</dl>
</li>
</ul>
<a name="getBitMaps--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBitMaps</h4>
<pre>public&nbsp;long[]&nbsp;getBitMaps()</pre>
<div class="block">return the array with bit maps representing usage of the extents</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>array of bit maps, lowest number block is represented with 1 bit</dd>
</dl>
</li>
</ul>
<a name="getSeedName--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSeedName</h4>
<pre>public&nbsp;java.lang.StringBuilder&nbsp;getSeedName()</pre>
<div class="block">return the 12 character seed channel name</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the 12 character seed channel name</dd>
</dl>
</li>
</ul>
<a name="getJulian--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getJulian</h4>
<pre>public&nbsp;int&nbsp;getJulian()</pre>
<div class="block">get the julian day of this file</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the julian day of this file (since long ago)</dd>
</dl>
</li>
</ul>
<a name="getHash--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHash</h4>
<pre>public&nbsp;long&nbsp;getHash()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Get the long hash key of channel name and part of the date</dd>
</dl>
</li>
</ul>
<a name="getUpdateTime--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUpdateTime</h4>
<pre>public&nbsp;long&nbsp;getUpdateTime()</pre>
<div class="block">return the update time of this block</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The update time a Date().getTime()</dd>
</dl>
</li>
</ul>
<a name="getNextIndex--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNextIndex</h4>
<pre>public&nbsp;int&nbsp;getNextIndex()</pre>
<div class="block">return the next index block number (-1 means there is none)</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the next index block number in this seed channels chain</dd>
</dl>
</li>
</ul>
<a name="compareTo-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compareTo</h4>
<pre>public&nbsp;int&nbsp;compareTo(java.lang.Object&nbsp;o)</pre>
<div class="block">compares two index blocks for ordering</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>compareTo</code>&nbsp;in interface&nbsp;<code>java.lang.Comparable</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>o</code> - The other object to compare to</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>-1 if this is < param, 0 if equal, 1 if this > param</dd>
</dl>
</li>
</ul>
<a name="main-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)</pre>
<div class="block">main test unit</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>args</code> - command line args</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../gov/usgs/anss/edge/IndexBlockCheck.html" title="class in gov.usgs.anss.edge"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?gov/usgs/anss/edge/IndexBlock.html" target="_top">Frames</a></li>
<li><a href="IndexBlock.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
