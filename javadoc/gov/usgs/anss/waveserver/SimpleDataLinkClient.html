<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_111) on Tue Dec 18 04:04:39 MST 2018 -->
<title>SimpleDataLinkClient</title>
<meta name="date" content="2018-12-18">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SimpleDataLinkClient";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../gov/usgs/anss/waveserver/QueryMomMonitor.html" title="class in gov.usgs.anss.waveserver"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../gov/usgs/anss/waveserver/StressThread.html" title="class in gov.usgs.anss.waveserver"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?gov/usgs/anss/waveserver/SimpleDataLinkClient.html" target="_top">Frames</a></li>
<li><a href="SimpleDataLinkClient.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">gov.usgs.anss.waveserver</div>
<h2 title="Class SimpleDataLinkClient" class="title">Class SimpleDataLinkClient</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>gov.usgs.anss.waveserver.SimpleDataLinkClient</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">SimpleDataLinkClient</span>
extends java.lang.Object</pre>
<div class="block">This class received data from a socket to a DataLinkSplitter on a QueryMom.
 It reads both RAW and MiniSeed data using the DataLink protocol and returns
 the data as simple time series by channel

 <pre>
 The basic idea is read the first 3 bytes which should be "D","L" and the binary length of the
 rest of the header.  Then read the rest of the header, and decode it.  If it contains
 "/RAW" use the raw interpretation of the payload, if not use the MiniSEED parsing

 For Raw read in the next 4 bytes (27, 3, and (short) nsamps.  The rest of the raw packet
 is 28+nsamp*4 bytes in length.  The parse the NNSSSSSCCCLL, start time, rate, and data[nsamps]

 For MiniSeed parse the header to get the NNSSSSSCCCLL, startms, endms and Ack flag as space delimited text
 from the header.  The miniseed data packet is the next 512 bytes after the header.

   For Raw Packets
 Offset    type       Description
 0          "DL"      Lead in characters in ascii
 2         byte       Size of the header in bytes from "WRITE to /RAW" inclusive(9 for RAW)
 3          "WRITE "   5 bytes In ascii
 8          "/RAW"    if a Raw data packet
 12         27        The original raw lead in
 13          3        The original raw lead in 2
 14        short      Number of data samples (big endian order), if negative user ack protocol
 16        NNSSSSSCCCLL  12 character network,station,channel,location code
 28        long       Time of the first sample in millis since 1970 (big endian order)
 36        double     Rate in Hz (big endian order)
 44        int[nsamp] The data samples 4 bytes for each sample (big endian order)

   For MiniSeed packets, the header is all ascii except for byte 2 which is the binary length
 of the header in bytes from "WRITE" to the "A" or "N"
 DL\<size\>WRITE NN_SSSS_LL_CC/MSEED StartMS EndMS [AN][Binary data packet]
 Offset     type      Description
 0          "DL"      Lead in characters in ascii
 2          byte       Size of the header in bytes (Length from "WRITE" to the MiniSeed size inclusive) varies because of ASCII encodings
 3          "WRITE "   5 bytes In ascii
 8        NN_SSSS_LL_CCC  12 character network,station,channel,location code
 ??       "/MSEED "   Characters indicating this is MiniSEED (note space)
 ??       Start       String time in millis since 1970 in ascii
          space       Separates the start and end times
          End         String end time in millis since 1970 in ascii
          space
          A or N      Depending on Ack mode
          space
          MS_Size     Size of the miniseed packet in bytes encoded as ascii (normally 512)
 20       byte[512] Containing one MiniSEED packet

 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/SimpleDataLinkClient.html#SimpleDataLinkClient-java.lang.String-int-java.lang.String-">SimpleDataLinkClient</a></span>(java.lang.String&nbsp;host,
                    int&nbsp;port,
                    java.lang.String&nbsp;regexp)</code>
<div class="block">create a new instance of DataLinkSocket (usually for DataLinkServer)</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/SimpleDataLinkClient.html#getPacket-java.util.GregorianCalendar-java.lang.StringBuilder-int:A-">getPacket</a></span>(java.util.GregorianCalendar&nbsp;start,
         java.lang.StringBuilder&nbsp;seedname,
         int[]&nbsp;data)</code>
<div class="block">Read a packet of time series from the link</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/SimpleDataLinkClient.html#main-java.lang.String:A-">main</a></span>(java.lang.String[]&nbsp;args)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="SimpleDataLinkClient-java.lang.String-int-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SimpleDataLinkClient</h4>
<pre>public&nbsp;SimpleDataLinkClient(java.lang.String&nbsp;host,
                            int&nbsp;port,
                            java.lang.String&nbsp;regexp)
                     throws java.io.IOException</pre>
<div class="block">create a new instance of DataLinkSocket (usually for DataLinkServer)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>host</code> - Host to connect to IP or DNS name</dd>
<dd><code>port</code> - Port to connect to</dd>
<dd><code>regexp</code> - Channel regexp</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - Of one comes from the socket</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getPacket-java.util.GregorianCalendar-java.lang.StringBuilder-int:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPacket</h4>
<pre>public&nbsp;int&nbsp;getPacket(java.util.GregorianCalendar&nbsp;start,
                     java.lang.StringBuilder&nbsp;seedname,
                     int[]&nbsp;data)
              throws java.io.IOException</pre>
<div class="block">Read a packet of time series from the link</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>start</code> - On return contains the starting time of the first sample</dd>
<dd><code>seedname</code> - On return contains the channel returned</dd>
<dd><code>data</code> - On return contains the nsamps of data</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>if > 0, the number of samples, if zero, something went wrong</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If the socket throws one</dd>
</dl>
</li>
</ul>
<a name="main-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../gov/usgs/anss/waveserver/QueryMomMonitor.html" title="class in gov.usgs.anss.waveserver"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../gov/usgs/anss/waveserver/StressThread.html" title="class in gov.usgs.anss.waveserver"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?gov/usgs/anss/waveserver/SimpleDataLinkClient.html" target="_top">Frames</a></li>
<li><a href="SimpleDataLinkClient.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
