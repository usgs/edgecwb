<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_111) on Sun Jun 24 04:04:40 MDT 2018 -->
<title>PacketBuilder</title>
<meta name="date" content="2018-06-24">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PacketBuilder";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10,"i30":10,"i31":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../gov/usgs/anss/waveserver/MenuItem.html" title="class in gov.usgs.anss.waveserver"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../gov/usgs/anss/waveserver/QueryMomMonitor.html" title="class in gov.usgs.anss.waveserver"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?gov/usgs/anss/waveserver/PacketBuilder.html" target="_top">Frames</a></li>
<li><a href="PacketBuilder.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">gov.usgs.anss.waveserver</div>
<h2 title="Class PacketBuilder" class="title">Class PacketBuilder</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>gov.usgs.anss.waveserver.PacketBuilder</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <span class="typeNameLabel">PacketBuilder</span>
extends java.lang.Object</pre>
<div class="block">this class is to emulate the building of packets from various objects. The
 original Trinet code had many object types which built lots of little buffers
 and combined them through various Java IO routines. This class takes the
 vision of a packet backed by a ByteBuffer and the various things that need to
 be added - whether raw data types, or the more object wrapped fields - are
 just method calls here which build up by adding to the ByteBuffer.
 <p>
 The packet has a 5 int header :
 <pre>
 version int =1
 msgtype int
 pkt#  int
 total#Packets int  You need to know the packet load in advance!
 DataLen      Does not include this header

 Following this are datafields which consist of :
 int    DataFieldDatalLen (fieldLen below + 8 for the field type and field length)
 int    field type  1=int, 2=double, 3=string, 4=byte array
 int    fieldLen    4 for int, 8 for double, some number for string or bytes
 byte[] payload     with data values so for an int 4 bytes, for a double 8 bytes

 The above 4 fields can repeat as necessary
 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#MAX_PACKET_BYTES">MAX_PACKET_BYTES</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#PacketBuilder-gov.usgs.anss.edgethread.EdgeThread-">PacketBuilder</a></span>(<a href="../../../../gov/usgs/anss/edgethread/EdgeThread.html" title="class in gov.usgs.anss.edgethread">EdgeThread</a>&nbsp;parent)</code>
<div class="block">This make an empty packet builder</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#addByteArray-byte:A-int-int-">addByteArray</a></span>(byte[]&nbsp;buffer,
            int&nbsp;off,
            int&nbsp;len)</code>
<div class="block">Add a section of bytes directory to the buffer (this does not add a byte[]
 field - see addByteField);</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#addByteField-byte:A-int-int-">addByteField</a></span>(byte[]&nbsp;b,
            int&nbsp;off,
            int&nbsp;len)</code>
<div class="block">This add bytes as a trinet byte object.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#addDouble-double-">addDouble</a></span>(double&nbsp;d)</code>
<div class="block">This add a single double at the current position (this does not add a
 double field - seed addDoubleField()</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#addDoubleField-double-">addDoubleField</a></span>(double&nbsp;value)</code>
<div class="block">This adds a double field per the trinet definition.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#addInt-int-">addInt</a></span>(int&nbsp;i)</code>
<div class="block">This add a single int at the current position (this does not add a int
 field - seed addIntField()</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#addIntField-int-">addIntField</a></span>(int&nbsp;value)</code>
<div class="block">This adds an int field per the trinet definition.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#addMiniSeed-gov.usgs.anss.seed.MiniSeed-double-">addMiniSeed</a></span>(<a href="../../../../gov/usgs/anss/seed/MiniSeed.html" title="class in gov.usgs.anss.seed">MiniSeed</a>&nbsp;ms,
           double&nbsp;trueSeconds)</code>
<div class="block">This adds a normal MiniSeed object to the Packet being built.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#addStringField-java.lang.String-">addStringField</a></span>(java.lang.String&nbsp;s)</code>
<div class="block">This add a string as a trinet string object.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#getBuf--">getBuf</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>java.nio.ByteBuffer</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#getByteBufferPayload--">getByteBufferPayload</a></span>()</code>
<div class="block">if the user wants to decode the buffer, it needs the ByteBuffer positioned
 to the beginning of the payload.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#getFieldBytes--">getFieldBytes</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#getFieldDouble--">getFieldDouble</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#getFieldInt--">getFieldInt</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#getFieldLength--">getFieldLength</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#getFieldString--">getFieldString</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>java.lang.StringBuilder</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#getFieldStringBuilder--">getFieldStringBuilder</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#getFieldType--">getFieldType</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#getMessageType--">getMessageType</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html" title="class in gov.usgs.anss.waveserver">PacketBuilder</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#getNextField--">getNextField</a></span>()</code>
<div class="block">return this packet so this can be used like pkt.getNextField().getDouble();</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#getPacketLength--">getPacketLength</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#getPacketNumber--">getPacketNumber</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#getPosition--">getPosition</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#getTotalPackets--">getTotalPackets</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#rebuildHeader-int-int-int-">rebuildHeader</a></span>(int&nbsp;msgType,
             int&nbsp;pktNumber,
             int&nbsp;pktTot)</code>
<div class="block">This is used to rebuild the 5 header ints just before sending the packet.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#receive-java.net.Socket-">receive</a></span>(java.net.Socket&nbsp;s)</code>
<div class="block">read a socket until a full packet is received</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#reset--">reset</a></span>()</code>
<div class="block">This resets a Packet to an initial state - no data fields, no numbers or
 lengths</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#send-java.net.Socket-">send</a></span>(java.net.Socket&nbsp;s)</code>
<div class="block">send this packet on the given socket.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#setMessageType-int-">setMessageType</a></span>(int&nbsp;type)</code>
<div class="block">Set the overall packet message type - this must be one of the types defined
 in org.trinet.waveserver.rt.TrinetTCPMessageType like TN_TCP_GETDATA_REQ or
 TN_TCP_GETDATA_RESP</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#setPacketLength-int-">setPacketLength</a></span>(int&nbsp;n)</code>&nbsp;</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#setPacketNumber-int-">setPacketNumber</a></span>(int&nbsp;n)</code>&nbsp;</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#setTotalPackets-int-">setTotalPackets</a></span>(int&nbsp;n)</code>
<div class="block">set the total number of packets in the whole packet</div>
</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html#toString--">toString</a></span>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="MAX_PACKET_BYTES">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MAX_PACKET_BYTES</h4>
<pre>public final&nbsp;int MAX_PACKET_BYTES</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#gov.usgs.anss.waveserver.PacketBuilder.MAX_PACKET_BYTES">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="PacketBuilder-gov.usgs.anss.edgethread.EdgeThread-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PacketBuilder</h4>
<pre>public&nbsp;PacketBuilder(<a href="../../../../gov/usgs/anss/edgethread/EdgeThread.html" title="class in gov.usgs.anss.edgethread">EdgeThread</a>&nbsp;parent)</pre>
<div class="block">This make an empty packet builder</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>parent</code> - A parent EdgeThread for logging</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getFieldLength--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFieldLength</h4>
<pre>public&nbsp;int&nbsp;getFieldLength()</pre>
</li>
</ul>
<a name="getFieldType--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFieldType</h4>
<pre>public&nbsp;int&nbsp;getFieldType()</pre>
</li>
</ul>
<a name="getFieldBytes--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFieldBytes</h4>
<pre>public&nbsp;byte[]&nbsp;getFieldBytes()</pre>
</li>
</ul>
<a name="getFieldStringBuilder--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFieldStringBuilder</h4>
<pre>public&nbsp;java.lang.StringBuilder&nbsp;getFieldStringBuilder()</pre>
</li>
</ul>
<a name="getFieldString--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFieldString</h4>
<pre>public&nbsp;java.lang.String&nbsp;getFieldString()</pre>
</li>
</ul>
<a name="getFieldInt--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFieldInt</h4>
<pre>public&nbsp;int&nbsp;getFieldInt()</pre>
</li>
</ul>
<a name="getFieldDouble--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFieldDouble</h4>
<pre>public&nbsp;double&nbsp;getFieldDouble()</pre>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toString()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</li>
</ul>
<a name="setMessageType-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMessageType</h4>
<pre>public&nbsp;void&nbsp;setMessageType(int&nbsp;type)</pre>
<div class="block">Set the overall packet message type - this must be one of the types defined
 in org.trinet.waveserver.rt.TrinetTCPMessageType like TN_TCP_GETDATA_REQ or
 TN_TCP_GETDATA_RESP</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>type</code> - Type to set</dd>
</dl>
</li>
</ul>
<a name="setTotalPackets-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setTotalPackets</h4>
<pre>public&nbsp;void&nbsp;setTotalPackets(int&nbsp;n)</pre>
<div class="block">set the total number of packets in the whole packet</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>n</code> - The total</dd>
</dl>
</li>
</ul>
<a name="setPacketNumber-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPacketNumber</h4>
<pre>public&nbsp;void&nbsp;setPacketNumber(int&nbsp;n)</pre>
</li>
</ul>
<a name="setPacketLength-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPacketLength</h4>
<pre>public&nbsp;void&nbsp;setPacketLength(int&nbsp;n)</pre>
</li>
</ul>
<a name="getMessageType--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMessageType</h4>
<pre>public&nbsp;int&nbsp;getMessageType()</pre>
</li>
</ul>
<a name="getTotalPackets--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTotalPackets</h4>
<pre>public&nbsp;int&nbsp;getTotalPackets()</pre>
</li>
</ul>
<a name="getPacketNumber--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPacketNumber</h4>
<pre>public&nbsp;int&nbsp;getPacketNumber()</pre>
</li>
</ul>
<a name="getPacketLength--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPacketLength</h4>
<pre>public&nbsp;int&nbsp;getPacketLength()</pre>
</li>
</ul>
<a name="getByteBufferPayload--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getByteBufferPayload</h4>
<pre>public&nbsp;java.nio.ByteBuffer&nbsp;getByteBufferPayload()</pre>
<div class="block">if the user wants to decode the buffer, it needs the ByteBuffer positioned
 to the beginning of the payload. This routine returns that ByteBuffer. The
 user can leave the position anywhere as the field reader portion will put
 the position to the right place on the next call</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="getBuf--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBuf</h4>
<pre>public&nbsp;byte[]&nbsp;getBuf()</pre>
</li>
</ul>
<a name="getPosition--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPosition</h4>
<pre>public&nbsp;int&nbsp;getPosition()</pre>
</li>
</ul>
<a name="reset--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reset</h4>
<pre>public&nbsp;void&nbsp;reset()</pre>
<div class="block">This resets a Packet to an initial state - no data fields, no numbers or
 lengths</div>
</li>
</ul>
<a name="rebuildHeader-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rebuildHeader</h4>
<pre>public&nbsp;void&nbsp;rebuildHeader(int&nbsp;msgType,
                          int&nbsp;pktNumber,
                          int&nbsp;pktTot)</pre>
<div class="block">This is used to rebuild the 5 header ints just before sending the packet.
 It sets the response type, the # of this packet, the total # of packets.
 The length of the packet comes from the current position of the ByteBuffer</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>msgType</code> - The message type</dd>
<dd><code>pktNumber</code> - The packet number</dd>
<dd><code>pktTot</code> - The total number of packets</dd>
</dl>
</li>
</ul>
<a name="addMiniSeed-gov.usgs.anss.seed.MiniSeed-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addMiniSeed</h4>
<pre>public&nbsp;void&nbsp;addMiniSeed(<a href="../../../../gov/usgs/anss/seed/MiniSeed.html" title="class in gov.usgs.anss.seed">MiniSeed</a>&nbsp;ms,
                        double&nbsp;trueSeconds)</pre>
<div class="block">This adds a normal MiniSeed object to the Packet being built. The trinet
 wave server considers this a byte array packet of 524 bytes where the
 internal structure is a bit strange :

 536 Length of object 4 int Its a byte array 528 bytes (512 bytes of
 MiniSeed + 8 bytes of rate + 4 bytes for number of samples + 4 bytes for
 the 512 bytes of payload) double rate int nsamp 512 int Bytes of data which
 follow byte [512] - The raw MiniSeed packet</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ms</code> - A normal MiniSeed packet to add to the Trinet data response
 packet</dd>
<dd><code>trueSeconds</code> - The time as a true (including leap seconds)</dd>
</dl>
</li>
</ul>
<a name="addDouble-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addDouble</h4>
<pre>public&nbsp;void&nbsp;addDouble(double&nbsp;d)</pre>
<div class="block">This add a single double at the current position (this does not add a
 double field - seed addDoubleField()</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>d</code> - The double to add</dd>
</dl>
</li>
</ul>
<a name="addInt-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addInt</h4>
<pre>public&nbsp;void&nbsp;addInt(int&nbsp;i)</pre>
<div class="block">This add a single int at the current position (this does not add a int
 field - seed addIntField()</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>i</code> - The int</dd>
</dl>
</li>
</ul>
<a name="addByteArray-byte:A-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addByteArray</h4>
<pre>public&nbsp;void&nbsp;addByteArray(byte[]&nbsp;buffer,
                         int&nbsp;off,
                         int&nbsp;len)</pre>
<div class="block">Add a section of bytes directory to the buffer (this does not add a byte[]
 field - see addByteField);</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>buffer</code> - Bytes array</dd>
<dd><code>off</code> - Offset to start</dd>
<dd><code>len</code> - Number of bytes to add starting at offset</dd>
</dl>
</li>
</ul>
<a name="receive-java.net.Socket-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receive</h4>
<pre>public&nbsp;int&nbsp;receive(java.net.Socket&nbsp;s)
            throws java.io.IOException</pre>
<div class="block">read a socket until a full packet is received</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>s</code> - The socket to read from</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Number of bytes read in packet payload (excluding the packet header)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="getNextField--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNextField</h4>
<pre>public&nbsp;<a href="../../../../gov/usgs/anss/waveserver/PacketBuilder.html" title="class in gov.usgs.anss.waveserver">PacketBuilder</a>&nbsp;getNextField()</pre>
<div class="block">return this packet so this can be used like pkt.getNextField().getDouble();</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>This object so things can be strung together</dd>
</dl>
</li>
</ul>
<a name="addIntField-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addIntField</h4>
<pre>public&nbsp;void&nbsp;addIntField(int&nbsp;value)</pre>
<div class="block">This adds an int field per the trinet definition. That is it adds 16 bytes
 : 12 for the full field length, a int 1 to indicate its an int, a 4 to
 given the length of the data payload, and the 4 bytes of the int.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>value</code> - int value to load</dd>
</dl>
</li>
</ul>
<a name="addDoubleField-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addDoubleField</h4>
<pre>public&nbsp;void&nbsp;addDoubleField(double&nbsp;value)</pre>
<div class="block">This adds a double field per the trinet definition. That is it adds 16
 bytes : 16 for the total field length, int 2 indicating a double, int 8 for
 the 8 byte length of the payload and the 8 bytes for the double</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>value</code> - double value to load</dd>
</dl>
</li>
</ul>
<a name="addByteField-byte:A-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addByteField</h4>
<pre>public&nbsp;void&nbsp;addByteField(byte[]&nbsp;b,
                         int&nbsp;off,
                         int&nbsp;len)</pre>
<div class="block">This add bytes as a trinet byte object. That is it adds the length of the
 bytes + 8 The len+8 for the length of this field (excluding this value), a
 4 to indicate byte array, the len of the byte array, and then the
 bytes[len]</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>b</code> - Source byte array for the bytes</dd>
<dd><code>off</code> - Offset in array of first byte to load</dd>
<dd><code>len</code> - Number of bytes to load</dd>
</dl>
</li>
</ul>
<a name="addStringField-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addStringField</h4>
<pre>public&nbsp;void&nbsp;addStringField(java.lang.String&nbsp;s)</pre>
<div class="block">This add a string as a trinet string object. That is it adds the length of
 the string + 8 The len+8 for the length of this field (excluding this
 value), a 3 to indicate String array, the len of the string, and then the
 string.getBytes[len]</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>s</code> - The string to load</dd>
</dl>
</li>
</ul>
<a name="send-java.net.Socket-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>send</h4>
<pre>public&nbsp;void&nbsp;send(java.net.Socket&nbsp;s)
          throws java.io.IOException</pre>
<div class="block">send this packet on the given socket. The length to write is always the
 current position of the byte buffer being used to build up the packet.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>s</code> - Socket to use to write</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If one is thrown during the write.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../gov/usgs/anss/waveserver/MenuItem.html" title="class in gov.usgs.anss.waveserver"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../gov/usgs/anss/waveserver/QueryMomMonitor.html" title="class in gov.usgs.anss.waveserver"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?gov/usgs/anss/waveserver/PacketBuilder.html" target="_top">Frames</a></li>
<li><a href="PacketBuilder.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
